{"version":3,"sources":["../decorator.js"],"names":["reactMenuAimDecorator","possiblyActivate","rowIdentifier","handler","config","delay","call","self","__reactMenuAimTimer","setTimeout","reactMenuAimConfig","ComposedComponent","__mouseMoveDocumentHandler","bind","mousemoveListener","document","__getMouseMoveDocumentHandler","mouseLocs","clearTimeout","e","props","handleMouseLeaveMenu","handleMouseEnterRow","Component"],"mappings":";;;;;;;;;;kBA8BwBA,qB;;AAtBxB;;;;AAEA;;;;;;;;+eAVA;;;;;;;;AASA;;;AAIA,SAASC,gBAAT,CAA0BC,aAA1B,EAAyCC,OAAzC,EAAkDC,MAAlD,EAA0D;AACxD,MAAIC,QAAQ,uBAAiBC,IAAjB,CAAsB,IAAtB,EAA4BF,MAA5B,CAAZ;;AAEA,MAAIC,KAAJ,EAAW;AACT,QAAIE,OAAO,IAAX;AACA,SAAKC,mBAAL,GAA2BC,WAAW,YAAU;AAC9CR,uBAAiBK,IAAjB,CAAsBC,IAAtB,EAA4BL,aAA5B,EAA2CC,OAA3C,EAAoDC,MAApD;AACD,KAF0B,EAExBC,KAFwB,CAA3B;AAGD,GALD,MAMK;AACHF,YAAQD,aAAR;AACD;AACF;;AAED;;;AAGe,SAASF,qBAAT,CAA+BU,kBAA/B,EAAmD;AAChE,SAAO,UAAUC,iBAAV,EAA6B;AAClC;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,wDAEkC;AAC9B,cAAI,CAAC,KAAKC,0BAAV,EAAsC;AACpC,iBAAKA,0BAAL,GAAkC,8BAAwBC,IAAxB,CAA6B,IAA7B,CAAlC;AACD;;AAED,iBAAO,KAAKD,0BAAZ;AACD;AARH;AAAA;AAAA,4CAUsB;AAClB,cAAI,mBAAaE,iBAAb,KAAmC,CAAvC,EAA0C;AACxC,0BAAGC,QAAH,EAAa,WAAb,EAA0B,KAAKC,6BAAL,EAA1B;AACD;;AAED,6BAAaF,iBAAb,IAAkC,CAAlC;AACD;AAhBH;AAAA;AAAA,+CAkByB;AACrB,6BAAaA,iBAAb,IAAkC,CAAlC;;AAEA,cAAI,mBAAaA,iBAAb,KAAmC,CAAvC,EAA0C;AACxC,2BAAIC,QAAJ,EAAc,WAAd,EAA2B,KAAKC,6BAAL,EAA3B;AACA,+BAAaC,SAAb,GAAyB,EAAzB;AACD;;AAEDC,uBAAa,KAAKV,mBAAlB;AACA,eAAKA,mBAAL,GAA2B,IAA3B;AACA,eAAKI,0BAAL,GAAkC,IAAlC;AACD;;AAED;;;;;AA/BF;AAAA;AAAA,6CAmCuBT,OAnCvB,EAmCgCgB,CAnChC,EAmCmC;AAC/B,cAAI,KAAKX,mBAAT,EAA8B;AAC5BU,yBAAa,KAAKV,mBAAlB;AACD;;AAED,cAAI,OAAOL,OAAP,KAAmB,UAAvB,EAAmC;AACjCA,oBAAQG,IAAR,CAAa,IAAb,EAAmBa,CAAnB;AACD;AACF;;AAED;;;;;;AA7CF;AAAA;AAAA,4CAkDsBjB,aAlDtB,EAkDqCC,OAlDrC,EAkD8C;AAC1C,cAAI,KAAKK,mBAAT,EAA8B;AAC5BU,yBAAa,KAAKV,mBAAlB;AACD;;AAED;AACAP,2BAAiBK,IAAjB,CAAsB,IAAtB,EAA4BJ,aAA5B,EAA2CC,OAA3C,EAAoDO,kBAApD;AACD;AAzDH;AAAA;AAAA,iCA2DW;AACP,iBAAO,8BAAC,iBAAD,eAAuB,KAAKU,KAA5B;AACL,kCAAsB,KAAKC,oBAAL,CAA0BR,IAA1B,CAA+B,IAA/B,CADjB;AAEL,iCAAqB,KAAKS,mBAAL,CAAyBT,IAAzB,CAA8B,IAA9B;AAFhB,aAAP;AAID;AAhEH;;AAAA;AAAA,MAAsC,gBAAMU,SAA5C;AAkED,GAnED;AAoED","file":"decorator.js","sourcesContent":["/**\n * react-menu-aim is a React Mixin heavily inspired by jQuery-menu-aim. All rights\n * reserved by the original author.\n *\n * https://github.com/jasonslyvia/react-menu-aim\n * https://github.com/kamens/jQuery-menu-aim\n*/\n\nimport React from 'react';\n// import {on, off, handleMouseMoveDocument, activate, getActivateDelay, mousemoveListener, mouseLocs} from './src/core.js';\nimport {on, off, handleMouseMoveDocument, activate, getActivateDelay, menuAimModel} from './src/core.js';\n\n\nfunction possiblyActivate(rowIdentifier, handler, config) {\n  var delay = getActivateDelay.call(this, config);\n\n  if (delay) {\n    var self = this;\n    this.__reactMenuAimTimer = setTimeout(function(){\n      possiblyActivate.call(self, rowIdentifier, handler, config);\n    }, delay);\n  }\n  else {\n    handler(rowIdentifier);\n  }\n}\n\n/**\n * @export\n */\nexport default function reactMenuAimDecorator(reactMenuAimConfig) {\n  return function (ComposedComponent) {\n    return class MenuAimDecorator extends React.Component {\n\n      __getMouseMoveDocumentHandler() {\n        if (!this.__mouseMoveDocumentHandler) {\n          this.__mouseMoveDocumentHandler = handleMouseMoveDocument.bind(this);\n        }\n\n        return this.__mouseMoveDocumentHandler;\n      }\n\n      componentDidMount() {\n        if (menuAimModel.mousemoveListener === 0) {\n          on(document, 'mousemove', this.__getMouseMoveDocumentHandler());\n        }\n\n        menuAimModel.mousemoveListener += 1;\n      }\n\n      componentWillUnmount() {\n        menuAimModel.mousemoveListener -= 1;\n\n        if (menuAimModel.mousemoveListener === 0) {\n          off(document, 'mousemove', this.__getMouseMoveDocumentHandler());\n          menuAimModel.mouseLocs = [];\n        }\n\n        clearTimeout(this.__reactMenuAimTimer);\n        this.__reactMenuAimTimer = null;\n        this.__mouseMoveDocumentHandler = null;\n      }\n\n      /**\n       * @param  {function} handler The true event handler for your app\n       * @param  {object}   e       React's synthetic event object\n       */\n      handleMouseLeaveMenu(handler, e) {\n        if (this.__reactMenuAimTimer) {\n          clearTimeout(this.__reactMenuAimTimer);\n        }\n\n        if (typeof handler === 'function') {\n          handler.call(this, e);\n        }\n      }\n\n      /**\n       * @param  {number}   rowIdentifier  The identifier of current row, ie. index or name\n       * @param  {function} handler        The true event handler for your app\n       * @param  {object}   e              React's synthetic event object\n       */\n      handleMouseEnterRow(rowIdentifier, handler) {\n        if (this.__reactMenuAimTimer) {\n          clearTimeout(this.__reactMenuAimTimer);\n        }\n\n        // possiblyActivate.call(this, rowIdentifier, handler, reactMenuAimConfig);\n        possiblyActivate.call(this, rowIdentifier, handler, reactMenuAimConfig);\n      }\n\n      render() {\n        return <ComposedComponent {...this.props}\n          handleMouseLeaveMenu={this.handleMouseLeaveMenu.bind(this)}\n          handleMouseEnterRow={this.handleMouseEnterRow.bind(this)}\n          ></ComposedComponent>;\n      }\n    }\n  }\n}\n"]}